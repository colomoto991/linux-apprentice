# 作业1
## 1. 通过U盘安装Linux，有条件的情况下尝试刻光盘安装。  
安装了ubuntu22.04 版， 通过rufus 制作u盘启动安装。

## 2.在机器上挂一个空硬盘，机器重启后依然可见硬盘。（选学）
   a. 在一块原始硬盘上做出5块空间相同的小盘。  
   b.  用这个5个小盘，做raid0，raid1，raid5，raid6。  
   c. 完成模拟一块坏盘，raid恢复的过程  
   d. mdadm stop raid后，重新恢复raid  
   e. 往raid里面增加新盘  
## 3.linux常用命令
>**cp – 复制命令**   
      
      用法： cp source destination  
      举例：cp 1.txt 2.txt   复制1.txt为2.txt

>**ls – list的缩写，查看当前目录下所有的文件名**  

>**mv – 移动命令**  

>**pwd – 显示当前工作目录**

>**cat – 用于连接文件并打印到标准输出设备上**  
     
    举例：cat -n textfile > textfile2   
      把textfile1的内容加上行号后输入textfile2  
      参数列表：  
      -n 或 --number：由 1 开始对所有输出的行数编号。    
      -b 或 --number-nonblank：和 -n 相似，只不过对于空白行不编号。  
      -s 或 --squeeze-blank：当遇到有连续两行以上的空白行，就代换为一行的空白行。  
      -v 或 --show-nonprinting：使用 ^ 和 M- 符号，除了 LFD 和 TAB 之外。  
      -E 或 --show-ends : 在每行结束处显示 $。  
      -T 或 --show-tabs: 将 TAB 字符显示为 ^I。  
      -A, --show-all：等价于 -vET。  
      -e：等价于"-vE"选项；  
      -t：等价于"-vT"选项；  

>**crontab – 定期执行程序的命令**  
当安装完成操作系统之后，默认会启动此任务调度命令
    crontab [-u user] file   
    crontab [哪个用户] 要执行的crontab文件  
         
    crontab 文件格式：  
    f1 f2 f3 f4 f5 program  
    其中 f1 是表示分钟，f2 表示小时，f3 表示一个月份中的第几日，f4 表示月份，f5 表示一个星期中的第几天。program 表示要执行的程序。
    当 f1 为 * 时表示每分钟都要执行 program，f2 为 * 时表示每小时都要执行程序，其馀类推
    当 f1 为 a-b 时表示从第 a 分钟到第 b 分钟这段时间内要执行，f2 为 a-b 时表示从第 a 到第 b 小时都要执行，其馀类推
    当 f1 为 */n 时表示每 n 分钟个时间间隔执行一次，f2 为 */n 表示每 n 小时个时间间隔执行一次，其馀类推
    当 f1 为 a, b, c,... 时表示第 a, b, c,... 分钟要执行，f2 为 a, b, c,... 时表示第 a, b, c...个小时要执行，其馀类推  
  
>**cut - 显示每行从开头算起num1到num2的文字**

>**df - 显示目前在 Linux 系统上的文件系统磁盘使用情况统计**
<img src="https://user-images.githubusercontent.com/57117517/167251001-aee4e957-7c04-459b-97c0-bc81266816bc.png">  

>**grep - 查找文件里符合条件的字符串**  
         
            
    grep test *file  
   结果：
    
    $ grep test test* #查找前缀有“test”的文件包含“test”字符串的文件  
    testfile1:This a Linux testfile! #列出testfile1 文件中包含test字符的行  
    testfile_2:This is a linux testfile! #列出testfile_2 文件中包含test字符的行  
    testfile_2:Linux test #列出testfile_2 文件中包含test字符的行   
   
>**head - 查看文件的开头部分的内容，有一个常用的参数 -n 用于显示行数，默认为 10，即显示 10 行的内容。**

>**ifconfig - 显示或设置网络设备**  
需要net-tools包启用

>**kill - 删除执行中的程序或工作**

>**locate - 查找符合条件的文档，他会去保存文档和目录名称的数据库内，查找合乎范本样式条件的文档或目录**
举例

     locate passwd   

>**ln - 为某一个文件在另外一个位置建立一个同步的链接，相当于window下的快捷方式**

>**mkdir - 创建目录**

>**netstat - 显示网络状态**
     
      netstat [-acCeFghilMnNoprstuvVwx][-A<网络类型>][--ip]

>**nuhup - 全称 no hang up（不挂起），用于在系统后台不挂断地运行命令，退出终端不会影响程序的运行**
      
       nohup Command [ Arg … ] [　& ]  
参数说明:  
Command：要执行的命令。  
Arg：一些参数，可以指定输出文件。  
&：让命令在后台执行，终端退出后命令仍旧执行。  

>**ping - 执行 ping 指令会使用 ICMP 传输协议，发出要求回应的信息，若远端主机的网络功能没有问题，就会回应该信息，因而得知该主机运作正常**
                 
      ping [-dfnqrRv][-c<完成次数>][-i<间隔秒数>][-I<网络界面>][-l<前置载入>][-p<范本样式>][-s<数据包大小>][-t<存活数值>][主机名称或IP地址]  
    
>**ps - （英文全拼：process status）命令用于显示当前进程的状态，类似于 windows 的任务管理器**

>**rm - 用于删除一个文件或者目录**

>**ps - （英文全拼：process status）命令用于显示当前进程的状态，类似于 windows 的任务管理器**

>**rsync - 它可以在本地计算机与远程计算机之间，或者两个本地目录之间同步文件（但不支持两台远程计算机之间的同步）。它也可以当作文件复制工具，替代cp和mv命令。**

>**sort - 用于将文本文件内容加以排序**
sort 命令将以默认的方式将文本文件的第一列以 ASCII 码的次序排列，并将结果输出到标准输出。   

>**tail -  命令可用于查看文件的内容**
      
       tail notes.log         # 默认显示最后 10 行  
            -f 循环读取  
            -q 不显示处理信息   
            -v 显示详细的处理信息  
            -c<数目> 显示的字节数   
             -n<行数> 显示文件的尾部 n 行内容  
             --pid=PID 与-f合用,表示在进程ID,PID死掉之后结束  
             -q, --quiet, --silent 从不输出给出文件名的首部  
             -s, --sleep-interval=S 与-f合用,表示在每次反复的间隔休眠S秒   
  
  >**talnet -  用于远端登入**  
执行telnet指令开启终端机阶段作业，并登入远端主机。   
      
      telnet 192.168.0.5 

      //登录IP为 192.168.0.5 的远程主机  

>**touch -  用于修改文件或者目录的时间属性，包括存取时间和更改时间。若文件不存在，系统会建立一个新的文件。 **  
  
>**uptime -  看系统负载**  

>**wc -  用于计算字数**  

## 4.压缩数据命令强化学习，tar、7za、zip、bz2 等
自动生成一个1GB随机纯文本文件，内容是中文或者英文。       
采用以上命令压缩，比较压缩率，压缩和解压时间，完成一个表格。
>自动生成部分
      
      #!/bin/sh
      #生成随机1个g的英文字符
      #1个 英文字符 占位1Byte, 1GB=1073741824Byte

      wordcount=1073742
      
      for w in $(seq 1 $wordcount);
      do
            #随机字符生成单词
            #tr 替换字符串 -c str1的补集 d删除str1的字符 dc表示删除str1的补集字符，即保留str1字符
            word=$(tr -dc "a-z"</dev/urandom|head -c 100)
            #word=${word}" "
            echo $word>>letters.txt
      done

|  命令  | 压缩率  |  压缩时间  |  解压时间   |
|  ----  | ----  | ----  | ----  |
| tar  | 36% | 0m1.510s | 0m0.386s|
| zip  | 36% | 1.416s| 1.830s |
| 7za  | 39% | 29.729s | 8.090s|
| bz2  | 39% | 0m3.268s| 0m3.268s|

## 5.排序命令强化学习
自动生成多列文件1G，第一列是5位随机字符串，第二列是2位数值，第三列是5位数值  
1）按照字符串顺序排序整个文件。   
2）首先按第一列排序，第一列字符串相同的情况下，按照第二列数值排序，第二列数值相同的情况下按第三列排序。  
3）考虑如何并行排序这个1G文件，加快速度（切分文件，分别压缩，然后再归并）  

## 6.安装http服务
并在服务目录创建readme文件，里面写上hello world.  通过浏览器可以访问到自己开放的这个http服务，即打开 http://127.0.0.1/readme 看到这个服务，80是默认端口，可以不用写成 http://127.0.0.1:80/readme  
http服务配置端口从80端口修改到8080端口，并且实现关机重启后服务自动启动


## 7.安装mysql数据库服务，并进行常见的运维（导出，备份，还原）操作
并实现创建一个数据库（例如叫testdb），并在数据库内创建一个表(score_table)，表内包含id（整形），name（字符串），score（整形）这么几个字段，并且自己insert一些记录。   

2）能够把创建的表dump出来，保存为score_table.sql文件。   

3）把数据库里的score_table表删除了，用这个score_table.sql能恢复出原表出来。  

4）学习如果将score_table表中，score（分数）在90分以上的同学记录导出来。  
下面的学习需要有网络环境，网络环境可以这样得到
创建两个linux虚拟机，互相可以通信
2）没有装虚拟机的同学，我们可以给一个远程机器，这样和自己实验的机器形成一个网络环境



## 8.学习iptables服务
安装iptables服务，并完成iptables几个简单功能 
假定之前安装的http服务开在8080端口，在iptables里面增加一个配置，使得原来访问readme能看到hello world，配置后不可打开（相当于封了8080端口）
把httpd服务配置在80端口上启动服务。netstat -anp | grep httpd 可以看到这个服务在80端口上服务。 然后做一个nat转发，将8080端口的请求转发到80端口上，这样打开http://127.0.0.1:80/readme 和 http://127.0.0.1:8080/readme 看到的文件是一样的。
3）如果有两台linux（两个IP，可以是内网IP，只要能互通就行），可以在一台机器（甲）上启动httpd服务（80端口），然后把对另一台机器(乙)的iptables配置成80端口转发到甲的80端口上。这样是访问乙的80端口，和打开甲的80端口看到的内容一样的。
        4）如果有三台linux，可以做另外一个实验，甲，乙，丙。甲乙上开httpd服务，都启动在80端口。丙上用iptables把 80端口的请求50% nat 到甲，50% nat 到 乙上，实现负载分流。当然也可以在2台linux上做实验，其中在甲机器上启动两个httpd实例，一个启动在80端口，一个启动在8080端口。然后乙机器50%的流量打给甲的80端口，50%的流量打给乙的7070端口。

## 9.学习NFS服务
两个Linux机器（甲和乙），网络可以互通，将甲的硬盘远程mount到乙的机器上。并测试下这种远程硬盘的读写速度和本地硬盘读写速度的差异，找一个度量硬盘读写速度的工具，并对比这种差异，比如dd命令创建一个文件，在本地硬盘创建一个1G文件的时间和在远程硬盘（但mount在本地）上创建的时间的差距。

## 10.学习awk命令，简单的字符串处理。awk中需要了解的内容包括
>BEGIN、END的含义  
>NR和FNR 处理两个文件  
>数组的理解（常用于计数器）  


## 11.Linux系统配置的学习
之前做iptables的nat，大家应该接触过需要在/etc/sysctl.conf  下配置：net.ipv4.ip_forward=1 才可能激活nat的功能。我们需要熟悉和了解一系列linux下的配置。以下是最常见的一些配置，大家上网找资料学习下，并掌握。

配置linux文件最大打开数（ulimit -n 可以看到当前系统默认值）

学习交换区的概念
cat /proc/sys/vm/swappiness 了解下这里配置的含义
内存不够的时候，不能增加内存需要增加自定义交换区，如何配置？
用swapon，swapoff增加和取消自定义交换区

用free命令考察交换区使用情况

DNS的配置
在/etc/resolv.conf中配置dns。将本机的DNS解析使用114.114.114.114，如何配置？配置好以后，怎么整明自己解析的baidu.com 是通过114.114.114.114解析出来的，了解下dig命令。看看dig baidu.com返回什么？

Yum源的配置
通常机器默认yum源都很慢，往往在国外，尝试配置网易yum源，或者阿里云yum源。对比下载安装的速度差异。

    cat /etc/passwd
查看当前机器的所有用户，有时候判断机器是否被黑了，或者出现了不明登录用户就要用这个命令。了解nologin的含义。几个系统默认账号的含义。

cat ~/.ssh/known_hosts
这个里面存放了什么？     /root/.ssh/id_rsa.pub  这里面存放的是什么？ 如果本机（比如叫机器A）上没有，可以通过什么方式创建。有了id_rsa.pub后，怎么把这个东西存放到其他机器上（比如叫机器B），使得本机（机器A）可以ssh 到那台机器B而不需要密码。

## 12.学会使用github

